import{_ as L,r,o as H,f as A,a as U,c as q,k as D,b as a,m as E,T as S,h as v,i as y,u as J,d as $,g as _,t as Q}from"./index-D36hbsoz.js";const j={key:0,class:"warp-overlay"},K={class:"chapter-content"},X={class:"chapter-content"},Y={class:"lighthouse-container"},Z={class:"chapter-content"},tt={__name:"IslandBookstoreWorld",setup(at){const W=J(),x=r(null),b=r(null),w=r(null),m=r(null),O=r(null),k=r(null),z=r(!1),F=r(!0),C=r(null),c=r({chapter1:!1,chapter2:!1,chapter3:!1,chapter4:!1,chapter5:!1});let u=null,p=null,n=null,g=[],B=0,I=!1,T=!1;class M{constructor(t,o,i,l,s){this.y=t,this.amplitude=o,this.length=i,this.speed=l,this.phase=s}draw(t,o,i){t.beginPath();for(let l=0;l<=o;l+=5){const s=this.y+Math.sin(l/this.length+i*this.speed+this.phase)*this.amplitude;l===0?t.moveTo(l,s):t.lineTo(l,s)}t.stroke()}}const N=()=>{if(!b.value||!w.value)return;const e=b.value,t=w.value;n=e.getContext("2d");const o=()=>{const s=t.getBoundingClientRect();e.width=s.width,e.height=s.height};o(),g=[new M(e.height*.5,20,150,.001,0),new M(e.height*.55,25,120,.0015,Math.PI/3),new M(e.height*.6,15,100,.002,Math.PI/2)],n.strokeStyle="rgba(74, 124, 159, 0.4)",n.lineWidth=2;const i=s=>{B||(B=s);const d=s-B;n.clearRect(0,0,e.width,e.height),g.forEach((f,h)=>{n.strokeStyle=`rgba(74, 124, 159, ${.25-h*.05})`,n.lineWidth=2.5-h*.5,f.draw(n,e.width,d)}),p=requestAnimationFrame(i)};p=requestAnimationFrame(i);const l=new ResizeObserver(()=>{o(),g[0].y=e.height*.5,g[1].y=e.height*.55,g[2].y=e.height*.6});l.observe(t),b._resizeObserver=l},P=()=>{if(!m.value)return;const e=m.value,t=50;e.innerHTML="";for(let o=0;o<t;o++){const i=document.createElement("div");i.className="star";const l=Math.random()*100,s=Math.random()*100,d=Math.random()*2+1,f=Math.random()*3+2,h=Math.random()*3;i.style.cssText=`
      position: absolute;
      left: ${l}%;
      top: ${s}%;
      width: ${d}px;
      height: ${d}px;
      background: rgba(255, 255, 255, ${Math.random()*.5+.5});
      border-radius: 50%;
      animation: twinkle ${f}s ease-in-out ${h}s infinite;
    `,e.appendChild(i)}},V=()=>{if(!k.value)return;const e=k.value,t=30;e.innerHTML="";for(let o=0;o<t;o++){const i=document.createElement("div");i.className="knowledge-particle";const l=30+Math.random()*40,s=20+Math.random()*60,d=Math.random()*3+2,f=Math.random()*4+3,h=Math.random()*2;i.style.cssText=`
      position: absolute;
      left: ${l}%;
      top: ${s}%;
      width: ${d}px;
      height: ${d}px;
      background: rgba(74, 124, 159, ${Math.random()*.3+.2});
      border-radius: 50%;
      animation: particle-float ${f}s ease-in-out ${h}s infinite;
    `,e.appendChild(i)}},R=()=>{var o;const e={root:x.value,threshold:.3};u=new IntersectionObserver(i=>{i.forEach(l=>{const s=l.target.dataset.chapter;s&&l.isIntersecting&&(c.value[`chapter${s}`]=!0,s==="2"&&!I&&(P(),I=!0),s==="3"&&!T&&(V(),T=!0))})},e);const t=(o=x.value)==null?void 0:o.querySelectorAll(".story-chapter");t==null||t.forEach(i=>u.observe(i))},G=async()=>{z.value=!0,await A(),setTimeout(()=>{W.push("/universe")},800)};return H(async()=>{setTimeout(()=>{F.value=!1},1800),await A(),R(),setTimeout(()=>{c.value.chapter1=!0,N()},2e3)}),U(()=>{var e;u&&u.disconnect(),p&&cancelAnimationFrame(p),(e=b.value)!=null&&e._resizeObserver&&b.value._resizeObserver.disconnect()}),(e,t)=>($(),q("div",{class:v(["island-bookstore-world",{"is-transitioning":z.value}])},[D(S,{name:"warp"},{default:E(()=>[F.value?($(),q("div",j,[...t[1]||(t[1]=[a("div",{class:"warp-circle"},[a("div",{class:"warp-circle-inner"})],-1),a("div",{class:"warp-text"},"VOL.001",-1)])])):_("",!0)]),_:1}),a("button",{class:"exit-btn",onClick:G},[...t[2]||(t[2]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[a("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),a("span",null,"Return to Universe",-1)])]),a("div",{class:"scroll-container",ref_key:"scrollContainer",ref:x},[a("section",{class:v(["story-chapter chapter-1",{"is-visible":c.value.chapter1}]),"data-chapter":"1"},[a("div",K,[a("div",{class:"chapter1-wave-container",ref_key:"waveCanvasContainer",ref:w},[a("canvas",{ref_key:"waveCanvas",ref:b},null,512)],512),t[3]||(t[3]=y('<div class="chapter1-island" data-v-18b3b688><svg viewBox="0 0 100 100" class="island-svg" data-v-18b3b688><circle cx="50" cy="50" r="15" fill="#1a1a1a" data-v-18b3b688></circle></svg></div><div class="intro-text" data-v-18b3b688><p class="intro-line-1" data-v-18b3b688>没有谁是一座孤岛</p><p class="intro-line-2" data-v-18b3b688>No man is an island</p></div>',2))])],2),a("section",{class:v(["story-chapter chapter-2",{"is-visible":c.value.chapter2}]),"data-chapter":"2"},[a("div",X,[a("div",{class:"lighthouse-stars",ref_key:"lighthouseStars",ref:m},null,512),a("div",Y,[t[5]||(t[5]=y('<svg viewBox="0 0 200 400" class="lighthouse-svg" data-v-18b3b688><rect x="70" y="300" width="60" height="100" fill="#2d3748" data-v-18b3b688></rect><polygon points="85,300 115,300 105,100 95,100" fill="#4a5568" data-v-18b3b688></polygon><rect x="90" y="90" width="20" height="10" fill="#1a202c" data-v-18b3b688></rect><circle cx="100" cy="95" r="8" fill="#f4d03f" class="lighthouse-light" data-v-18b3b688></circle><line x1="85" y1="100" x2="115" y2="100" stroke="#1a202c" stroke-width="2" data-v-18b3b688></line></svg>',1)),a("div",{class:"lighthouse-beam",ref_key:"lighthouseBeam",ref:O},[...t[4]||(t[4]=[a("div",{class:"beam-inner"},null,-1)])],512)]),t[6]||(t[6]=a("div",{class:"lighthouse-quote"},[a("p",{class:"quote-text"},"我们在黑暗中并肩而行"),a("p",{class:"quote-sub"},"We walk together in the dark")],-1))])],2),a("section",{class:v(["story-chapter chapter-3",{"is-visible":c.value.chapter3}]),"data-chapter":"3"},[a("div",Z,[a("div",{class:"bookshelf-particles",ref_key:"bookshelfParticles",ref:k},null,512),t[7]||(t[7]=y('<div class="bookshelf-container" data-v-18b3b688><svg viewBox="0 0 400 300" class="bookshelf-svg" data-v-18b3b688><rect x="50" y="50" width="300" height="15" fill="#8B7355" class="shelf-board" data-v-18b3b688></rect><rect x="50" y="150" width="300" height="15" fill="#8B7355" class="shelf-board" data-v-18b3b688></rect><rect x="50" y="250" width="300" height="15" fill="#8B7355" class="shelf-board" data-v-18b3b688></rect><rect x="40" y="40" width="15" height="230" fill="#6B5345" data-v-18b3b688></rect><rect x="345" y="40" width="15" height="230" fill="#6B5345" data-v-18b3b688></rect><g class="books-row-1" data-v-18b3b688><rect x="70" y="10" width="15" height="40" fill="#C9302C" class="growing-book" style="animation-delay:0.2s;" data-v-18b3b688></rect><rect x="88" y="5" width="12" height="45" fill="#2C3E50" class="growing-book" style="animation-delay:0.4s;" data-v-18b3b688></rect><rect x="103" y="8" width="18" height="42" fill="#27AE60" class="growing-book" style="animation-delay:0.6s;" data-v-18b3b688></rect><rect x="124" y="12" width="14" height="38" fill="#8E44AD" class="growing-book" style="animation-delay:0.8s;" data-v-18b3b688></rect><rect x="141" y="3" width="16" height="47" fill="#D35400" class="growing-book" style="animation-delay:1s;" data-v-18b3b688></rect><rect x="160" y="10" width="13" height="40" fill="#2980B9" class="growing-book" style="animation-delay:1.2s;" data-v-18b3b688></rect></g><g class="books-row-2" data-v-18b3b688><rect x="200" y="110" width="14" height="40" fill="#E74C3C" class="growing-book" style="animation-delay:1.4s;" data-v-18b3b688></rect><rect x="217" y="105" width="17" height="45" fill="#3498DB" class="growing-book" style="animation-delay:1.6s;" data-v-18b3b688></rect><rect x="237" y="108" width="15" height="42" fill="#1ABC9C" class="growing-book" style="animation-delay:1.8s;" data-v-18b3b688></rect><rect x="255" y="112" width="13" height="38" fill="#F39C12" class="growing-book" style="animation-delay:2s;" data-v-18b3b688></rect><rect x="271" y="103" width="16" height="47" fill="#9B59B6" class="growing-book" style="animation-delay:2.2s;" data-v-18b3b688></rect></g><g class="books-row-3" data-v-18b3b688><rect x="80" y="210" width="15" height="40" fill="#16A085" class="growing-book" style="animation-delay:2.4s;" data-v-18b3b688></rect><rect x="98" y="205" width="18" height="45" fill="#C0392B" class="growing-book" style="animation-delay:2.6s;" data-v-18b3b688></rect><rect x="119" y="208" width="14" height="42" fill="#7F8C8D" class="growing-book" style="animation-delay:2.8s;" data-v-18b3b688></rect><rect x="136" y="212" width="16" height="38" fill="#27AE60" class="growing-book" style="animation-delay:3s;" data-v-18b3b688></rect><rect x="155" y="203" width="15" height="47" fill="#8E44AD" class="growing-book" style="animation-delay:3.2s;" data-v-18b3b688></rect><rect x="173" y="210" width="13" height="40" fill="#D35400" class="growing-book" style="animation-delay:3.4s;" data-v-18b3b688></rect></g></svg></div><div class="bookshelf-quote" data-v-18b3b688><p class="quote-text" data-v-18b3b688>书籍是随身携带的避难所</p><p class="quote-sub" data-v-18b3b688>Books are shelters we carry with us</p></div>',2))])],2),a("section",{class:v(["story-chapter chapter-4",{"is-visible":c.value.chapter4}]),"data-chapter":"4"},[...t[8]||(t[8]=[y('<div class="chapter-content" data-v-18b3b688><div class="gift-container" data-v-18b3b688><svg viewBox="0 0 200 200" class="gift-svg" data-v-18b3b688><rect x="50" y="80" width="100" height="80" fill="#C9302C" class="gift-box" data-v-18b3b688></rect><rect x="45" y="60" width="110" height="25" fill="#E74C3C" class="gift-lid" data-v-18b3b688></rect><rect x="95" y="60" width="10" height="100" fill="#F4D03F" class="gift-ribbon" data-v-18b3b688></rect><rect x="50" y="95" width="100" height="10" fill="#F4D03F" class="gift-ribbon" data-v-18b3b688></rect><ellipse cx="100" cy="50" rx="20" ry="12" fill="#F4D03F" class="gift-bow" data-v-18b3b688></ellipse><ellipse cx="85" cy="48" rx="15" ry="10" fill="#F7DC6F" class="gift-bow-left" data-v-18b3b688></ellipse><ellipse cx="115" cy="48" rx="15" ry="10" fill="#F7DC6F" class="gift-bow-right" data-v-18b3b688></ellipse><circle cx="100" cy="50" r="40" fill="rgba(244, 208, 63, 0.2)" class="gift-glow" data-v-18b3b688></circle></svg><svg class="connection-lines" viewBox="0 0 400 300" data-v-18b3b688><line x1="200" y1="150" x2="100" y2="100" stroke="rgba(74, 124, 159, 0.3)" stroke-width="1" stroke-dasharray="5,5" class="connection-line" data-v-18b3b688></line><line x1="200" y1="150" x2="300" y2="100" stroke="rgba(74, 124, 159, 0.3)" stroke-width="1" stroke-dasharray="5,5" class="connection-line" data-v-18b3b688></line><line x1="200" y1="150" x2="100" y2="200" stroke="rgba(74, 124, 159, 0.3)" stroke-width="1" stroke-dasharray="5,5" class="connection-line" data-v-18b3b688></line><line x1="200" y1="150" x2="300" y2="200" stroke="rgba(74, 124, 159, 0.3)" stroke-width="1" stroke-dasharray="5,5" class="connection-line" data-v-18b3b688></line><circle cx="100" cy="100" r="8" fill="#4a7c9f" class="connection-point" style="animation-delay:0.5s;" data-v-18b3b688></circle><circle cx="300" cy="100" r="8" fill="#4a7c9f" class="connection-point" style="animation-delay:1s;" data-v-18b3b688></circle><circle cx="100" cy="200" r="8" fill="#4a7c9f" class="connection-point" style="animation-delay:1.5s;" data-v-18b3b688></circle><circle cx="300" cy="200" r="8" fill="#4a7c9f" class="connection-point" style="animation-delay:2s;" data-v-18b3b688></circle></svg></div><div class="gift-quote" data-v-18b3b688><p class="quote-text" data-v-18b3b688>有些礼物会改变你的一生</p><p class="quote-sub" data-v-18b3b688>Some gifts change your life</p></div></div>',1)])],2),a("section",{class:v(["story-chapter chapter-5",{"is-visible":c.value.chapter5}]),"data-chapter":"5"},[...t[9]||(t[9]=[y('<div class="chapter-content" data-v-18b3b688><div class="archipelago-container" data-v-18b3b688><svg viewBox="0 0 600 400" class="archipelago-svg" data-v-18b3b688><rect width="600" height="400" fill="url(#oceanGradient)" data-v-18b3b688></rect><defs data-v-18b3b688><linearGradient id="oceanGradient" x1="0%" y1="0%" x2="100%" y2="100%" data-v-18b3b688><stop offset="0%" style="stop-color:#e8f0f4;stop-opacity:1;" data-v-18b3b688></stop><stop offset="100%" style="stop-color:#d4e4ed;stop-opacity:1;" data-v-18b3b688></stop></linearGradient></defs><g class="bridges" data-v-18b3b688><line x1="150" y1="200" x2="300" y2="200" stroke="rgba(74, 124, 159, 0.4)" stroke-width="3" stroke-dasharray="10,5" data-v-18b3b688></line><line x1="300" y1="200" x2="450" y2="150" stroke="rgba(74, 124, 159, 0.4)" stroke-width="3" stroke-dasharray="10,5" data-v-18b3b688></line><line x1="300" y1="200" x2="350" y2="280" stroke="rgba(74, 124, 159, 0.4)" stroke-width="3" stroke-dasharray="10,5" data-v-18b3b688></line></g><g class="island-main" data-v-18b3b688><circle cx="300" cy="200" r="50" fill="#1a1a1a" class="island-circle" data-v-18b3b688></circle><circle cx="300" cy="200" r="40" fill="none" stroke="#4a7c9f" stroke-width="2" class="island-ring" data-v-18b3b688></circle><text x="300" y="205" text-anchor="middle" fill="#f7f5f2" font-size="12" font-family="Inter" data-v-18b3b688>AJ</text></g><g class="island-2" data-v-18b3b688><circle cx="150" cy="200" r="35" fill="#2d3748" class="island-circle-small" data-v-18b3b688></circle><text x="150" y="205" text-anchor="middle" fill="#f7f5f2" font-size="10" font-family="Inter" data-v-18b3b688>M</text></g><g class="island-3" data-v-18b3b688><circle cx="450" cy="150" r="35" fill="#2d3748" class="island-circle-small" data-v-18b3b688></circle><text x="450" y="155" text-anchor="middle" fill="#f7f5f2" font-size="10" font-family="Inter" data-v-18b3b688>A</text></g><g class="island-4" data-v-18b3b688><circle cx="350" cy="280" r="30" fill="#2d3748" class="island-circle-small" data-v-18b3b688></circle><text x="350" y="285" text-anchor="middle" fill="#f7f5f2" font-size="10" font-family="Inter" data-v-18b3b688>D</text></g><circle cx="100" cy="120" r="20" fill="#4a5568" class="tiny-island" data-v-18b3b688></circle><circle cx="500" cy="250" r="25" fill="#4a5568" class="tiny-island" data-v-18b3b688></circle><circle cx="200" cy="320" r="18" fill="#4a5568" class="tiny-island" data-v-18b3b688></circle></svg></div><div class="archipelago-quote" data-v-18b3b688><p class="quote-text-main" data-v-18b3b688>我们读书，因为我们孤单</p><p class="quote-text-sub" data-v-18b3b688>我们孤单，因为我们读书</p><p class="quote-text-eng" data-v-18b3b688>We read to know we&#39;re not alone</p></div></div>',1)])],2)],512),D(S,{name:"quote-float"},{default:E(()=>[C.value?($(),q("div",{key:0,class:"floating-quote",onClick:t[0]||(t[0]=o=>C.value=null)},[a("p",null,Q(C.value),1),t[10]||(t[10]=a("span",{class:"quote-hint"},"Click to dismiss",-1))])):_("",!0)]),_:1})],2))}},st=L(tt,[["__scopeId","data-v-18b3b688"]]);export{st as default};
