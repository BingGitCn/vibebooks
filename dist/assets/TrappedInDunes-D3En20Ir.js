import{_ as R,r as p,i as S,o as V,c as s,h as m,a as o,w,T as x,F as u,b as g,u as F,e as r,g as z,j as y,t as c,n as b}from"./index-D4bvYyhi.js";const W={class:"trapped-in-dunes"},E={key:0,class:"warp-overlay"},H={class:"main-container"},L={class:"chapter-axis"},N=["onClick"],P={class:"node-label"},X={class:"chapter-characters"},Y={class:"content-area"},q={class:"chapter-text"},A={class:"chapter-title"},G={class:"chapter-subtitle"},J={class:"chapter-narrative"},K={class:"characters-map"},Q=["onMouseenter"],U={key:0,class:"character-tooltip"},Z={class:"character-name"},ee={class:"character-role"},ae={key:0,class:"relations-svg"},oe=["x2","y2"],te={key:0,class:"interaction-hint"},ne={__name:"TrappedInDunes",setup(se){const k=F(),f=p(!0),l=p(1),v=p(null),e={dongyong:{id:"dongyong",name:"董勇",role:"史官",size:8,color:"#1a1a1a",x:50,y:50},zhaowuling:{id:"zhaowuling",name:"赵武灵王",role:"改革之主",size:8,color:"#525252",x:50,y:20},zhaohe:{id:"zhaohe",name:"赵何",role:"惠文王",size:5,color:"#525252",x:35,y:30},zhaozhang:{id:"zhaozhang",name:"赵章",role:"安阳君",size:6,color:"#8B0000",x:65,y:30},zhaocheng:{id:"zhaocheng",name:"赵成",role:"公子成",size:5,color:"#4a7c9f",x:30,y:70},lidui:{id:"lidui",name:"李兑",role:"少司寇",size:5,color:"#999999",x:70,y:70},feiyi:{id:"feiyi",name:"肥义",role:"相国",size:4,color:"#999999",x:40,y:60},lianpo:{id:"lianpo",name:"廉颇",role:"大将",size:3,color:"#4a7c9f",x:25,y:50},shangyu:{id:"shangyu",name:"尚禹",role:"军官",size:3,color:"#4a7c9f",x:75,y:50}},C=[{label:"序幕",characters:[e.dongyong]},{label:"缘起",characters:[e.dongyong,e.zhaowuling]},{label:"峰回",characters:[e.dongyong,e.zhaowuling,e.zhaohe,e.zhaozhang]},{label:"惊变",characters:[e.dongyong,e.zhaowuling,e.zhaohe,e.zhaozhang,e.zhaocheng,e.lidui]},{label:"拨云",characters:Object.values(e)},{label:"溯源",characters:Object.values(e)}],h=S(()=>({1:{title:"序幕",period:"1930年",narrative:["西北科学考察团","在沙丘发现了竹简","风，吹了三千年"],characters:[e.dongyong],relations:[]},2:{title:"缘起",period:"公元前299年",narrative:["赵雍胡服骑射","让赵国称霸中原","主父传位于子何"],characters:[e.dongyong,e.zhaowuling],relations:[]},3:{title:"峰回",period:"权力裂痕",narrative:["父、子、兄弟","王权开始倾斜","野心在暗处生长"],characters:[e.dongyong,e.zhaowuling,e.zhaohe,e.zhaozhang],relations:[]},4:{title:"惊变",period:"沙丘百日",narrative:["公子成与李兑起兵","主父被困沙丘宫","三月后，饿死"],characters:[e.dongyong,e.zhaowuling,e.zhaohe,e.zhaozhang,e.zhaocheng,e.lidui],relations:[]},5:{title:"拨云",period:"真相浮现",narrative:["权力漩涡中的棋子","忠诚、背叛、野心","历史的尘埃落定"],characters:Object.values(e),relations:[{from:"zhaowuling",to:"zhaohe"},{from:"zhaowuling",to:"zhaozhang"},{from:"zhaozhang",to:"zhaocheng"},{from:"zhaozhang",to:"lidui"},{from:"zhaohe",to:"feiyi"}]},6:{title:"溯源",period:"小说自我呈现",narrative:["史官的笔","书写历史的真相","与虚构的边界"],characters:Object.values(e),relations:[{from:"zhaowuling",to:"zhaohe"},{from:"zhaowuling",to:"zhaozhang"},{from:"zhaozhang",to:"zhaocheng"},{from:"zhaozhang",to:"lidui"},{from:"zhaohe",to:"feiyi"},{from:"zhaocheng",to:"lianpo"},{from:"zhaocheng",to:"shangyu"}]}})[l.value]),_=a=>a.id==="dongyong"?"character-protagonist":["zhaohe","zhaozhang","zhaowuling"].includes(a.id)?"character-royal":["zhaocheng","lianpo","shangyu"].includes(a.id)?"character-military":"character-official",$=a=>({width:`${a.size}px`,height:`${a.size}px`,backgroundColor:a.color}),j=a=>({left:`${a.x}%`,top:`${a.y}%`,width:`${a.size*1.5}px`,height:`${a.size*1.5}px`}),M=a=>{const n=Object.values(e).find(t=>t.id===a);return n?`${n.x}%`:"50%"},O=a=>{const n=Object.values(e).find(t=>t.id===a);return n?`${n.y}%`:"50%"},T=a=>{a>=1&&a<=6&&(l.value=a)},B=a=>{v.value=a},I=()=>{v.value=null},D=()=>{k.push("/universe")};return V(()=>{setTimeout(()=>{f.value=!1},1800)}),(a,n)=>(r(),s("div",W,[m(x,{name:"warp"},{default:w(()=>[f.value?(r(),s("div",E,[...n[0]||(n[0]=[o("div",{class:"warp-circle"},[o("div",{class:"warp-circle-inner"})],-1),o("div",{class:"warp-text"},"困于沙丘",-1)])])):z("",!0)]),_:1}),o("button",{class:"exit-btn",onClick:D},[...n[1]||(n[1]=[o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[o("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),o("span",null,"Return",-1)])]),o("div",H,[o("div",L,[n[3]||(n[3]=o("div",{class:"axis-line"},null,-1)),(r(),s(u,null,g(C,(t,i)=>o("div",{key:i,class:y(["chapter-node",{active:l.value===i+1}]),onClick:d=>T(i+1)},[n[2]||(n[2]=o("div",{class:"node-dot"},null,-1)),o("div",P,c(t.label),1),o("div",X,[(r(!0),s(u,null,g(t.characters,d=>(r(),s("div",{key:d.id,class:y(["character-dot",_(d)]),style:b($(d))},null,6))),128))])],10,N)),64))]),o("div",Y,[m(x,{name:"chapter-fade",mode:"out-in"},{default:w(()=>[(r(),s("div",{key:l.value,class:"chapter-content"},[o("div",q,[o("h2",A,c(h.value.title),1),o("p",G,c(h.value.period),1),o("div",J,[(r(!0),s(u,null,g(h.value.narrative,(t,i)=>(r(),s("p",{key:i},c(t),1))),128))])]),o("div",K,[n[4]||(n[4]=o("div",{class:"protagonist-dot"},null,-1)),(r(!0),s(u,null,g(h.value.characters,t=>{var i;return r(),s("div",{key:t.id,class:y(["character-point",_(t)]),style:b(j(t)),onMouseenter:d=>B(t),onMouseleave:I},[((i=v.value)==null?void 0:i.id)===t.id?(r(),s("div",U,[o("span",Z,c(t.name),1),o("span",ee,c(t.role),1)])):z("",!0)],46,Q)}),128)),l.value>=5?(r(),s("svg",ae,[(r(!0),s(u,null,g(h.value.relations,t=>(r(),s("line",{key:`${t.from}-${t.to}`,x1:"50%",y1:"50%",x2:M(t.to),y2:O(t.to),stroke:"rgba(26, 26, 26, 0.15)","stroke-width":"0.5"},null,8,oe))),128))])):z("",!0)]),l.value>=5?(r(),s("div",te,[...n[5]||(n[5]=[o("p",null,"悬停查看关系",-1)])])):z("",!0)]))]),_:1})])])]))}},ie=R(ne,[["__scopeId","data-v-9f182fa8"]]);export{ie as default};
