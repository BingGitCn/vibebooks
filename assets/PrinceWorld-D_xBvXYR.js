import{_ as O,r as l,o as V,f as C,a as z,c as y,j as M,b as t,l as B,T as S,m as r,h as i,u as N,d as g,g as Q,t as W}from"./index-Dn0xiH-t.js";const F={key:0,class:"warp-overlay"},R={__name:"PrinceWorld",setup(U){const A=N(),u=l(null),k=l(null),p=l(null),w=l(!1),m=l(!0),d=l(null),e=l({intro:!1,stars:!1,planet:!1,rose:!1,fox:!1,goodbye:!1,end:!1}),q=["本质的东西用眼睛是看不见的","你要永远为你驯服过的东西负责","只有用心才能看清事物的本质","所有的大人都曾经是小孩，只是很少有人记得这一点","你在你的玫瑰花身上耗费的时间使得你的玫瑰花变得如此重要","只有孩子们知道他们在寻找什么","语言是误解的源泉","如果你四点钟来，那么三点钟我就开始感到幸福","一个人只有用心去看，才能看到真实"];let v=null,f=null,h=null,x=[];class L{constructor(a){this.canvas=a,this.reset()}reset(){this.x=Math.random()*this.canvas.width,this.y=Math.random()*this.canvas.height,this.size=Math.random()*1.5+.5,this.baseAlpha=Math.random()*.3+.1,this.twinkleSpeed=Math.random()*.015+.005,this.twinkleOffset=Math.random()*Math.PI*2}update(a){this.currentAlpha=this.baseAlpha+Math.sin(a*this.twinkleSpeed+this.twinkleOffset)*.1}draw(a){a.beginPath(),a.arc(this.x,this.y,this.size,0,Math.PI*2),a.fillStyle=`rgba(26, 26, 26, ${this.currentAlpha})`,a.fill()}}const T=()=>{const s=k.value;if(!s||!p.value)return;h=s.getContext("2d");const a=()=>{const c=p.value.getBoundingClientRect();s.width=c.width,s.height=c.height,x.forEach(b=>b.reset())};a(),x=Array.from({length:80},()=>new L(s));let o=0;const n=()=>{o++,h.clearRect(0,0,s.width,s.height),x.forEach(c=>{c.update(o),c.draw(h)}),f=requestAnimationFrame(n)};n(),window.addEventListener("resize",a)},I=()=>{const s=q[Math.floor(Math.random()*q.length)];d.value=s,setTimeout(()=>{d.value=null},4e3)},P=()=>{var o;const s={root:u.value,threshold:.3};v=new IntersectionObserver(n=>{n.forEach(c=>{const b=c.target.dataset.section;b&&c.isIntersecting&&(e.value[b]=!0)})},s);const a=(o=u.value)==null?void 0:o.querySelectorAll(".story-section");a==null||a.forEach(n=>v.observe(n))},E=async()=>{w.value=!0,await C(),setTimeout(()=>{A.push("/universe")},800)};return V(async()=>{setTimeout(()=>{m.value=!1},1800),await C(),P(),setTimeout(()=>{e.value.intro=!0},2e3),T()}),z(()=>{v&&v.disconnect(),f&&cancelAnimationFrame(f)}),(s,a)=>(g(),y("div",{class:i(["prince-world",{"is-transitioning":w.value}])},[M(S,{name:"warp"},{default:B(()=>[m.value?(g(),y("div",F,[...a[1]||(a[1]=[t("div",{class:"warp-circle"},[t("div",{class:"warp-circle-inner"})],-1),t("div",{class:"warp-text"},"B-612",-1)])])):Q("",!0)]),_:1}),t("button",{class:"exit-btn",onClick:E},[...a[2]||(a[2]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[t("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),t("span",null,"Return to Universe",-1)])]),t("div",{class:"scroll-container",ref_key:"scrollContainer",ref:u},[t("section",{class:i(["story-section section-intro",{"is-visible":e.value.intro}]),"data-section":"intro"},[...a[3]||(a[3]=[r('<div class="section-content" data-v-73c762b1><div class="intro-text" data-v-73c762b1><span class="line line-1" data-v-73c762b1>本质的东西</span><span class="line line-2" data-v-73c762b1>用眼睛是</span><span class="line line-3" data-v-73c762b1>看不见的</span><span class="line line-4" data-v-73c762b1>What is essential is invisible to the eye</span></div><div class="scroll-hint" data-v-73c762b1><span data-v-73c762b1>Scroll to explore</span><svg class="scroll-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" data-v-73c762b1><path d="M12 5v14M5 12l7 7 7-7" data-v-73c762b1></path></svg></div></div>',1)])],2),t("section",{class:i(["story-section section-stars",{"is-visible":e.value.stars}]),"data-section":"stars"},[t("div",{class:"stars-field",ref_key:"starsField",ref:p,onClick:I},[t("canvas",{ref_key:"starsCanvas",ref:k},null,512)],512),a[4]||(a[4]=t("div",{class:"section-content"},[t("blockquote",{class:"section-quote"},' "星星发亮是为了让每一个人有一天都能找到属于自己的星星" ')],-1))],2),t("section",{class:i(["story-section section-planet",{"is-visible":e.value.planet}]),"data-section":"planet"},[...a[5]||(a[5]=[r('<div class="planet-wrapper" data-v-73c762b1><div class="b612-planet" data-v-73c762b1><svg viewBox="0 0 200 200" class="planet-svg" data-v-73c762b1><circle cx="100" cy="100" r="60" fill="none" stroke="currentColor" stroke-width="0.8" class="planet-circle" data-v-73c762b1></circle><circle cx="85" cy="90" r="4" fill="currentColor" class="crater" data-v-73c762b1></circle><circle cx="115" cy="105" r="3" fill="currentColor" class="crater" data-v-73c762b1></circle><circle cx="95" cy="115" r="2.5" fill="currentColor" class="crater" data-v-73c762b1></circle><circle cx="100" cy="70" r="2" fill="#f4d03f" class="rose-marker" data-v-73c762b1></circle></svg><div class="planet-label" data-v-73c762b1>B-612</div></div></div><div class="section-content" data-v-73c762b1><p class="section-text" data-v-73c762b1> 在那里，他看到了日出四十四次<br data-v-73c762b1><span class="text-small" data-v-73c762b1>There, he watched the sunset forty-four times</span></p></div>',2)])],2),t("section",{class:i(["story-section section-rose",{"is-visible":e.value.rose}]),"data-section":"rose"},[...a[6]||(a[6]=[r('<div class="rose-wrapper" data-v-73c762b1><svg viewBox="0 0 200 300" class="rose-svg" data-v-73c762b1><line x1="100" y1="280" x2="100" y2="180" stroke="#1a1a1a" stroke-width="1" class="rose-stem" data-v-73c762b1></line><path d="M100 240 Q 80 230 70 240 Q 85 245 100 240" fill="none" stroke="#1a1a1a" stroke-width="0.8" class="rose-leaf" data-v-73c762b1></path><path d="M100 220 Q 120 210 130 220 Q 115 225 100 220" fill="none" stroke="#1a1a1a" stroke-width="0.8" class="rose-leaf" data-v-73c762b1></path><g class="rose-petals" data-v-73c762b1><circle cx="100" cy="160" r="25" fill="none" stroke="#f4d03f" stroke-width="1.5" class="petal-outer" data-v-73c762b1></circle><circle cx="100" cy="160" r="18" fill="none" stroke="#f4d03f" stroke-width="1.2" class="petal-middle" data-v-73c762b1></circle><circle cx="100" cy="160" r="10" fill="none" stroke="#f4d03f" stroke-width="0.8" class="petal-inner" data-v-73c762b1></circle><circle cx="100" cy="160" r="4" fill="#f4d03f" class="rose-center" data-v-73c762b1></circle></g></svg></div><div class="section-content" data-v-73c762b1><blockquote class="section-quote section-quote--gold" data-v-73c762b1> &quot;你要永远为你驯服过的东西负责&quot; </blockquote><p class="section-text" data-v-73c762b1> 正是你为你的玫瑰花费的时光<br data-v-73c762b1><span class="text-small" data-v-73c762b1>It is the time you have wasted for your rose that makes your rose so important</span></p></div>',2)])],2),t("section",{class:i(["story-section section-fox",{"is-visible":e.value.fox}]),"data-section":"fox"},[...a[7]||(a[7]=[r('<div class="fox-wrapper" data-v-73c762b1><svg viewBox="0 0 300 200" class="fox-svg" data-v-73c762b1><g class="fox-outline" stroke="#1a1a1a" stroke-width="1.5" fill="none" data-v-73c762b1><path d="M 80 70 L 95 90 L 110 70" class="fox-ear-left" data-v-73c762b1></path><path d="M 120 70 L 135 90 L 150 70" class="fox-ear-right" data-v-73c762b1></path><circle cx="115" cy="95" r="30" class="fox-head" data-v-73c762b1></circle><circle cx="105" cy="90" r="2" fill="#1a1a1a" class="fox-eye" data-v-73c762b1></circle><circle cx="125" cy="90" r="2" fill="#1a1a1a" class="fox-eye" data-v-73c762b1></circle><path d="M 145 100 Q 180 110 200 140 L 200 160 L 140 150 Q 130 130 145 100" class="fox-body" data-v-73c762b1></path><path d="M 200 140 Q 250 120 260 150 Q 255 170 200 160" class="fox-tail" data-v-73c762b1></path></g></svg></div><div class="section-content" data-v-73c762b1><p class="section-text" data-v-73c762b1> &quot;请驯服我吧&quot;<br data-v-73c762b1></p><blockquote class="section-quote" data-v-73c762b1> &quot;只有用心才能看清事物的本质&quot; </blockquote></div>',2)])],2),t("section",{class:i(["story-section section-goodbye",{"is-visible":e.value.goodbye}]),"data-section":"goodbye"},[...a[8]||(a[8]=[r('<div class="goodbye-content" data-v-73c762b1><div class="final-constellation" data-v-73c762b1><svg viewBox="0 0 400 400" class="constellation-svg" data-v-73c762b1><g stroke="rgba(26,26,26,0.15)" stroke-width="0.5" fill="none" data-v-73c762b1><line x1="100" y1="150" x2="150" y2="100" data-v-73c762b1></line><line x1="150" y1="100" x2="250" y2="100" data-v-73c762b1></line><line x1="250" y1="100" x2="300" y2="150" data-v-73c762b1></line><line x1="100" y1="150" x2="100" y2="250" data-v-73c762b1></line><line x1="100" y1="250" x2="150" y2="300" data-v-73c762b1></line><line x1="300" y1="150" x2="300" y2="250" data-v-73c762b1></line><line x1="300" y1="250" x2="250" y2="300" data-v-73c762b1></line><line x1="150" y1="300" x2="250" y2="300" data-v-73c762b1></line><line x1="150" y1="100" x2="100" y2="250" data-v-73c762b1></line><line x1="250" y1="100" x2="300" y2="250" data-v-73c762b1></line></g><g fill="#f4d03f" data-v-73c762b1><circle cx="100" cy="150" r="3" class="constellation-star" data-v-73c762b1></circle><circle cx="150" cy="100" r="2" class="constellation-star" data-v-73c762b1></circle><circle cx="250" cy="100" r="2" class="constellation-star" data-v-73c762b1></circle><circle cx="300" cy="150" r="3" class="constellation-star" data-v-73c762b1></circle><circle cx="100" cy="250" r="2" class="constellation-star" data-v-73c762b1></circle><circle cx="150" cy="300" r="2" class="constellation-star" data-v-73c762b1></circle><circle cx="300" cy="250" r="2" class="constellation-star" data-v-73c762b1></circle><circle cx="250" cy="300" r="2" class="constellation-star" data-v-73c762b1></circle></g></svg></div><p class="final-text" data-v-73c762b1> 所有的大人都曾经是小孩<br data-v-73c762b1><span class="text-small" data-v-73c762b1>虽然，只有少数人记得</span></p><p class="final-quote" data-v-73c762b1> &quot;所有的大人都曾经是小孩，虽然，只有少数人记得&quot; </p></div>',1)])],2),a[9]||(a[9]=r('<section class="story-section section-end" data-section="end" data-v-73c762b1><div class="end-content" data-v-73c762b1><div class="book-info" data-v-73c762b1><span class="vol-number" data-v-73c762b1>VOL.006</span><h2 class="book-title" data-v-73c762b1>小王子</h2><p class="book-author" data-v-73c762b1>圣埃克苏佩里</p><p class="book-subtitle" data-v-73c762b1>Le Petit Prince</p></div></div></section>',1))],512),M(S,{name:"quote-float"},{default:B(()=>[d.value?(g(),y("div",{key:0,class:"floating-quote",onClick:a[0]||(a[0]=o=>d.value=null)},[t("p",null,W(d.value),1),a[10]||(a[10]=t("span",{class:"quote-hint"},"Click to dismiss",-1))])):Q("",!0)]),_:1})],2))}},j=O(R,[["__scopeId","data-v-73c762b1"]]);export{j as default};
